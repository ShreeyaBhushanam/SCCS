<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' href='../styles/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <title>SCCS</title>
    
</head>
<style>
    /* @import url(https://raw.github.com/FortAwesome/Font-Awesome/master/docs/assets/css/font-awesome.min.css); */

    body {
        background-color: #f6f6f6;
        font-family: cera-round-pro, "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-weight: 400;
    }

    .review_display:hover {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.02), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    .card {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    @media (max-width:991px) {
        .flexdir {
            display: flex;
        }

        .mp {
            height: 30vh;
            width: 110vw;
        }
    }

    .carousel .item {
        height: 100px;
    }

    .item img {
        position: absolute;
        top: 0;
        left: 0;
        min-height: 100px;
    }

    .menucard:before {
        content: '\2630';
        font-size: 35px;
    }
</style>
<style>
    #wrap {
        margin: 5px;
        display: inline-block;
        position: relative;
        height: 60px;
        float: right;
        padding: 0;
        position: relative;
    }

    #search {
        height: 58px;
        font-size: 22px;
        display: inline-block;
        font-family: "Lato";
        font-weight: 100;
        border: none;
        outline: none;
        color: #555;
        padding: 3px;
        padding-right: 60px;
        width: 0px;
        position: absolute;
        top: 0;
        right: 0;
        background: none;
        z-index: 3;
        transition: width .4s cubic-bezier(0.000, 0.795, 0.000, 1.000);
        cursor: pointer;
    }

    #search:focus:hover {
        border-bottom: 1px solid #BBB;
    }

    #search:focus {
        width: 300px;
        z-index: 1;
        border-bottom: 1px solid #BBB;
        cursor: text;
    }

    @media screen and (max-width: 500px) {
        #search:focus {
            width: 50vw;
            z-index: 1;
            border-bottom: 1px solid #BBB;
            cursor: text;
        }
    }

    #search_submit {
        height: 67px;
        width: 63px;
        display: inline-block;
        color: red;
        float: right;
        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADNQTFRFU1NT9fX1lJSUXl5e1dXVfn5+c3Nz6urqv7+/tLS0iYmJqampn5+fysrK39/faWlp////Vi4ZywAAABF0Uk5T/////////////////////wAlrZliAAABLklEQVR42rSWWRbDIAhFHeOUtN3/ags1zaA4cHrKZ8JFRHwoXkwTvwGP1Qo0bYObAPwiLmbNAHBWFBZlD9j0JxflDViIObNHG/Do8PRHTJk0TezAhv7qloK0JJEBh+F8+U/hopIELOWfiZUCDOZD1RADOQKA75oq4cvVkcT+OdHnqqpQCITWAjnWVgGQUWz12lJuGwGoaWgBKzRVBcCypgUkOAoWgBX/L0CmxN40u6xwcIJ1cOzWYDffp3axsQOyvdkXiH9FKRFwPRHYZUaXMgPLeiW7QhbDRciyLXJaKheCuLbiVoqx1DVRyH26yb0hsuoOFEPsoz+BVE0MRlZNjGZcRQyHYkmMp2hBTIzdkzCTc/pLqOnBrk7/yZdAOq/q5NPBH1f7x7fGP4C3AAMAQrhzX9zhcGsAAAAASUVORK5CYII=) center center no-repeat;
        text-indent: -10000px;
        border: none;
        position: absolute;
        top: 0;
        right: 0;
        z-index: 2;
        cursor: pointer;
        opacity: 0.4;
        cursor: pointer;
        transition: opacity .4s ease;
    }

    #search_submit:hover {
        opacity: 0.8;
    }
</style>

<body>
    <div class="topnav" >
        <a href="/cat" class="split"  style="float: right;
        border:solid 1px black; border-radius: 5px;"><b>Catalogue Page</b></a>
    </div> 
    <div class="container" style="flex-direction: column;">
        <div class="row flexdir">
            <!--details-->
            <div class="col-12 col-lg-4 mx-auto px-auto"
                style="margin-bottom:10px; margin-top:10%; font-family: 'Akshar', sans-serif; font-size:20px; font-weight:550;">

                <div class="card" style="width:100%; background-color: rgb(245, 245, 245, 0.4);border: none;">
                    <div class="card-header">
                        <div class="" style="text-align: center; padding: 10px;">
                            <span style="font-weight:1000; margin-right:4vw;  font-size:20px; ">
                                <%= place.name %>
                            </span>
                            
                        </div>
                    </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item" style="color: grey; font-size: medium;">
                                    <span>
                                        <%= place.description %>
                                    </span>
                                </li>
                            </ul>
                                <div class="card-body d-flex flex-row" style="padding-left: 13%; padding-right: 20%;">
                                    <a href="/place/<%= place.id %>" class="btn btn-primary me-3"
                                        style="font-size: 18px;">Update</a>
                                    <form action="/place/<%= place.id %>?_method=DELETE" method="post">
                                        <button type="submit" class="btn btn-danger me-3"
                                            style="font-size: 18px;">Delete</button>
                                    </form>
                                    <%console.log(place.images[0])%>
                                    <form action="/clickdownoad/:<%=place.id %>" method="POST">
                                     <button type="submit"> <a href="<%=place.images[0].url %>" class="btn btn-success me-3"
                                        style="font-size: 18px;"target='_blank'>Download</a>
                                     </button>
                                    </form>
                                
                                </div>


                </div>

            </div>
            <div class="row">
                <!--menu-->
                <div class="col-12 col-lg-5"
                    style="margin-bottom:10px; margin-top:10px; font-family: cera-round-pro, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size:20px; font-weight:350;">
                    <% var j=0 %>
                        <div style="display: flex;justify-content: space-between;">
                            <span class="menucard" style="font-size: 26px;"> KEYWORDS</span>
    
                            <div id="wrap">
                                <form action="" autocomplete="on">
                                    <input id="search" name="search" type="text" placeholder="Search">
                                    <input id="search_submit" value="Rechercher" type="submit">
                                </form>
                            </div>
    
                        </div>
    
                        <div class="card" id="menusection" style="background-color: #45898e; color: white;">
                            <% for(let i of place.items) {%>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="padding: 10px;">
                                        <%= i %>
                                    </span>
    
                                </div>
    
                                <!-- <% j++; %> -->
                                    <% } %>
                        </div>
                </div>
            </div>
        </div>

        </br>
        </div>

    </div>
    <br />
    
    <script>
        const place = <%- JSON.stringify(place) %>;
        
        var root = document.getElementById('menusection');
        
        const searchBar = document.getElementById('search');


        // console.log(all);

        searchBar.addEventListener('keyup', (e) => {
            const searchString = e.target.value.toLowerCase();
            let i = 0;
            let indexarray = [];
            const searchIndex = place.items.filter((character) => {
                if (character.toLowerCase().includes(searchString)) {
                    indexarray.push(i);
                    i++;return true;}
                i++;return false;
            });


            console.log(indexarray);
            displayCharacters(indexarray);
        })

        const displayCharacters = (indexes) => {
            if (indexes.length === 0) {
                root.innerHTML = `
                                    <div class="py-3">
                                        <h3>No results have been found &#9785;</h3>
                                    </div>`;
                return 0;
            };

            const htmlString = indexes
                .map((index) => {
                    return `<div style="display: flex; justify-content: space-between;">
                                <span style="padding: 10px;">
                                    ${place.items[index]}
                                </span>

                            </div>
`;
                })
                .join('');

            root.innerHTML =  htmlString;
        };
       

    </script>
</body>
</html>